Ballerina File(0,2644)
  IMPORT_DECLARATION(0,22)
    PsiElement(import)('import')(0,6)
    PsiWhiteSpace(' ')(6,7)
    ORG_NAME(7,16)
      PsiElement(identifier)('ballerina')(7,16)
    PsiElement(/)('/')(16,17)
    COMPLETE_PACKAGE_NAME(17,21)
      PACKAGE_NAME(17,21)
        PsiElement(identifier)('http')(17,21)
    PsiElement(;)(';')(21,22)
  PsiWhiteSpace('\n')(22,23)
  IMPORT_DECLARATION(23,43)
    PsiElement(import)('import')(23,29)
    PsiWhiteSpace(' ')(29,30)
    ORG_NAME(30,39)
      PsiElement(identifier)('ballerina')(30,39)
    PsiElement(/)('/')(39,40)
    COMPLETE_PACKAGE_NAME(40,42)
      PACKAGE_NAME(40,42)
        PsiElement(identifier)('io')(40,42)
    PsiElement(;)(';')(42,43)
  PsiWhiteSpace('\n\n')(43,45)
  DEFINITION(45,92)
    TYPE_DEFINITION(45,92)
      PsiElement(type)('type')(45,49)
      PsiWhiteSpace(' ')(49,50)
      PsiElement(identifier)('ClientRequest')(50,63)
      PsiWhiteSpace(' ')(63,64)
      FINITE_TYPE(64,91)
        FINITE_TYPE_UNIT(64,91)
          RECORD_TYPE_NAME(64,91)
            PsiElement(record)('record')(64,70)
            PsiWhiteSpace(' ')(70,71)
            PsiElement({)('{')(71,72)
            PsiWhiteSpace('\n    ')(72,77)
            RECORD_FIELD_DEFINITION_LIST(77,89)
              FIELD_DEFINITION(77,89)
                SIMPLE_TYPE_NAME(77,83)
                  VALUE_TYPE_NAME(77,83)
                    PsiElement(string)('string')(77,83)
                PsiWhiteSpace(' ')(83,84)
                PsiElement(identifier)('host')(84,88)
                PsiElement(;)(';')(88,89)
            PsiWhiteSpace('\n')(89,90)
            PsiElement(})('}')(90,91)
      PsiElement(;)(';')(91,92)
  PsiWhiteSpace('\n\n')(92,94)
  DEFINITION(94,155)
    TYPE_DEFINITION(94,155)
      PsiElement(type)('type')(94,98)
      PsiWhiteSpace(' ')(98,99)
      PsiElement(identifier)('RequestCount')(99,111)
      PsiWhiteSpace(' ')(111,112)
      FINITE_TYPE(112,154)
        FINITE_TYPE_UNIT(112,154)
          RECORD_TYPE_NAME(112,154)
            PsiElement(record)('record')(112,118)
            PsiWhiteSpace(' ')(118,119)
            PsiElement({)('{')(119,120)
            PsiWhiteSpace('\n    ')(120,125)
            RECORD_FIELD_DEFINITION_LIST(125,152)
              FIELD_DEFINITION(125,137)
                SIMPLE_TYPE_NAME(125,131)
                  VALUE_TYPE_NAME(125,131)
                    PsiElement(string)('string')(125,131)
                PsiWhiteSpace(' ')(131,132)
                PsiElement(identifier)('host')(132,136)
                PsiElement(;)(';')(136,137)
              PsiWhiteSpace('\n    ')(137,142)
              FIELD_DEFINITION(142,152)
                SIMPLE_TYPE_NAME(142,145)
                  VALUE_TYPE_NAME(142,145)
                    PsiElement(int)('int')(142,145)
                PsiWhiteSpace(' ')(145,146)
                PsiElement(identifier)('count')(146,151)
                PsiElement(;)(';')(151,152)
            PsiWhiteSpace('\n')(152,153)
            PsiElement(})('}')(153,154)
      PsiElement(;)(';')(154,155)
  PsiWhiteSpace('\n\n')(155,157)
  DEFINITION(157,199)
    GLOBAL_VARIABLE_DEFINITION(157,199)
      SIMPLE_TYPE_NAME(157,178)
        REFERENCE_TYPE_NAME(157,178)
          BUILT_IN_REFERENCE_TYPE_NAME(157,178)
            STREAM_TYPE_NAME(157,178)
              PsiElement(stream)('stream')(157,163)
              PsiElement(<)('<')(163,164)
              SIMPLE_TYPE_NAME(164,177)
                REFERENCE_TYPE_NAME(164,177)
                  USER_DEFINE_TYPE_NAME(164,177)
                    NAME_REFERENCE(164,177)
                      PsiElement(identifier)('ClientRequest')(164,177)
              PsiElement(>)('>')(177,178)
      PsiWhiteSpace(' ')(178,179)
      PsiElement(identifier)('requestStream')(179,192)
      PsiWhiteSpace(' ')(192,193)
      PsiElement(=)('=')(193,194)
      PsiWhiteSpace(' ')(194,195)
      TYPE_INIT_EXPRESSION(195,198)
        INIT_WITHOUT_TYPE(195,198)
          PsiElement(new)('new')(195,198)
      PsiElement(;)(';')(198,199)
  PsiWhiteSpace('\n')(199,200)
  DEFINITION(200,246)
    GLOBAL_VARIABLE_DEFINITION(200,246)
      SIMPLE_TYPE_NAME(200,220)
        REFERENCE_TYPE_NAME(200,220)
          BUILT_IN_REFERENCE_TYPE_NAME(200,220)
            STREAM_TYPE_NAME(200,220)
              PsiElement(stream)('stream')(200,206)
              PsiElement(<)('<')(206,207)
              SIMPLE_TYPE_NAME(207,219)
                REFERENCE_TYPE_NAME(207,219)
                  USER_DEFINE_TYPE_NAME(207,219)
                    NAME_REFERENCE(207,219)
                      PsiElement(identifier)('RequestCount')(207,219)
              PsiElement(>)('>')(219,220)
      PsiWhiteSpace(' ')(220,221)
      PsiElement(identifier)('requestCountStream')(221,239)
      PsiWhiteSpace(' ')(239,240)
      PsiElement(=)('=')(240,241)
      PsiWhiteSpace(' ')(241,242)
      TYPE_INIT_EXPRESSION(242,245)
        INIT_WITHOUT_TYPE(242,245)
          PsiElement(new)('new')(242,245)
      PsiElement(;)(';')(245,246)
  PsiWhiteSpace('\n\n')(246,248)
  DEFINITION(248,1517)
    FUNCTION_DEFINITION(248,1517)
      PsiElement(function)('function')(248,256)
      PsiWhiteSpace(' ')(256,257)
      CALLABLE_UNIT_SIGNATURE(257,296)
        ANY_IDENTIFIER_NAME(257,283)
          PsiElement(identifier)('initRealtimeRequestCounter')(257,283)
        PsiElement(()('(')(283,284)
        PsiElement())(')')(284,285)
        PsiWhiteSpace(' ')(285,286)
        RETURN_PARAMETER(286,296)
          PsiElement(returns)('returns')(286,293)
          PsiWhiteSpace(' ')(293,294)
          RETURN_TYPE(294,296)
            SIMPLE_TYPE_NAME(294,296)
              EMPTY_TUPLE_LITERAL(294,296)
                PsiElement(()('(')(294,295)
                PsiElement())(')')(295,296)
      PsiWhiteSpace(' ')(296,297)
      CALLABLE_UNIT_BODY(297,1517)
        PsiElement({)('{')(297,298)
        PsiWhiteSpace('\n\n    ')(298,304)
        PsiComment(LINE_COMMENT)('// Whenever the `requestCountStream` stream receives an event from the streaming rules defined in the `forever` block,')(304,422)
        PsiWhiteSpace('\n    ')(422,427)
        PsiComment(LINE_COMMENT)('// the `printRequestCount` function is invoked.')(427,474)
        PsiWhiteSpace('\n    ')(474,479)
        STATEMENT(479,527)
          EXPRESSION_STMT(479,527)
            VARIABLE_REFERENCE_EXPRESSION(479,526)
              INVOCATION_REFERENCE(479,526)
                SIMPLE_VARIABLE_REFERENCE(479,497)
                  NAME_REFERENCE(479,497)
                    PsiElement(identifier)('requestCountStream')(479,497)
                INVOCATION(497,526)
                  PsiElement(.)('.')(497,498)
                  ANY_IDENTIFIER_NAME(498,507)
                    PsiElement(identifier)('subscribe')(498,507)
                  PsiElement(()('(')(507,508)
                  INVOCATION_ARG_LIST(508,525)
                    INVOCATION_ARG(508,525)
                      VARIABLE_REFERENCE_EXPRESSION(508,525)
                        SIMPLE_VARIABLE_REFERENCE(508,525)
                          NAME_REFERENCE(508,525)
                            PsiElement(identifier)('printRequestCount')(508,525)
                  PsiElement())(')')(525,526)
            PsiElement(;)(';')(526,527)
        PsiWhiteSpace('\n\n    ')(527,533)
        PsiComment(LINE_COMMENT)('// Gather all the events coming in to the `requestStream` for five seconds, group them by the host, count the number')(533,649)
        PsiWhiteSpace('\n    ')(649,654)
        PsiComment(LINE_COMMENT)('// of requests per host, and check if the count is more than six. If yes, publish the output (host and the count) to')(654,770)
        PsiWhiteSpace('\n    ')(770,775)
        PsiComment(LINE_COMMENT)('// the `requestCountStream` stream as an alert. This `forever` block is executed once, when initializing the service.')(775,892)
        PsiWhiteSpace('\n    ')(892,897)
        PsiComment(LINE_COMMENT)('// The processing happens asynchronously each time the `requestStream` receives an event.')(897,986)
        PsiWhiteSpace('\n    ')(986,991)
        STATEMENT(991,1515)
          FOREVER_STATEMENT(991,1515)
            PsiElement(forever)('forever')(991,998)
            PsiWhiteSpace(' ')(998,999)
            PsiElement({)('{')(999,1000)
            PsiWhiteSpace('\n        ')(1000,1009)
            FOREVER_STATEMENT_BODY(1009,1509)
              STREAMING_QUERY_STATEMENT(1009,1509)
                PsiElement(from)('from')(1009,1013)
                PsiWhiteSpace(' ')(1013,1014)
                STREAMING_INPUT(1014,1051)
                  SIMPLE_VARIABLE_REFERENCE(1014,1027)
                    NAME_REFERENCE(1014,1027)
                      PsiElement(identifier)('requestStream')(1014,1027)
                  PsiWhiteSpace(' ')(1027,1028)
                  WINDOW_CLAUSE(1028,1051)
                    PsiElement(window)('window')(1028,1034)
                    PsiWhiteSpace(' ')(1034,1035)
                    FUNCTION_INVOCATION(1035,1051)
                      FUNCTION_NAME_REFERENCE(1035,1044)
                        ANY_IDENTIFIER_NAME(1035,1044)
                          PsiElement(identifier)('timeBatch')(1035,1044)
                      PsiElement(()('(')(1044,1045)
                      INVOCATION_ARG_LIST(1045,1050)
                        INVOCATION_ARG(1045,1050)
                          SIMPLE_LITERAL_EXPRESSION(1045,1050)
                            SIMPLE_LITERAL(1045,1050)
                              INTEGER_LITERAL(1045,1050)
                                PsiElement(DECIMAL_INTEGER_LITERAL)('10000')(1045,1050)
                      PsiElement())(')')(1050,1051)
                PsiWhiteSpace('\n        ')(1051,1060)
                SELECT_CLAUSE(1060,1172)
                  PsiElement(select)('select')(1060,1066)
                  PsiWhiteSpace(' ')(1066,1067)
                  SELECT_EXPRESSION_LIST(1067,1103)
                    SELECT_EXPRESSION(1067,1085)
                      VARIABLE_REFERENCE_EXPRESSION(1067,1085)
                        FIELD_VARIABLE_REFERENCE(1067,1085)
                          SIMPLE_VARIABLE_REFERENCE(1067,1080)
                            NAME_REFERENCE(1067,1080)
                              PsiElement(identifier)('requestStream')(1067,1080)
                          FIELD(1080,1085)
                            PsiElement(.)('.')(1080,1081)
                            PsiElement(identifier)('host')(1081,1085)
                    PsiElement(,)(',')(1085,1086)
                    PsiWhiteSpace(' ')(1086,1087)
                    SELECT_EXPRESSION(1087,1103)
                      VARIABLE_REFERENCE_EXPRESSION(1087,1094)
                        FUNCTION_INVOCATION_REFERENCE(1087,1094)
                          FUNCTION_INVOCATION(1087,1094)
                            FUNCTION_NAME_REFERENCE(1087,1092)
                              ANY_IDENTIFIER_NAME(1087,1092)
                                PsiElement(identifier)('count')(1087,1092)
                            PsiElement(()('(')(1092,1093)
                            PsiElement())(')')(1093,1094)
                      PsiWhiteSpace(' ')(1094,1095)
                      PsiElement(as)('as')(1095,1097)
                      PsiWhiteSpace(' ')(1097,1098)
                      PsiElement(identifier)('count')(1098,1103)
                  PsiWhiteSpace('\n            ')(1103,1116)
                  GROUP_BY_CLAUSE(1116,1143)
                    PsiElement(group)('group')(1116,1121)
                    PsiWhiteSpace(' ')(1121,1122)
                    PsiElement(by)('by')(1122,1124)
                    PsiWhiteSpace(' ')(1124,1125)
                    VARIABLE_REFERENCE_LIST(1125,1143)
                      FIELD_VARIABLE_REFERENCE(1125,1143)
                        SIMPLE_VARIABLE_REFERENCE(1125,1138)
                          NAME_REFERENCE(1125,1138)
                            PsiElement(identifier)('requestStream')(1125,1138)
                        FIELD(1138,1143)
                          PsiElement(.)('.')(1138,1139)
                          PsiElement(identifier)('host')(1139,1143)
                  PsiWhiteSpace('\n            ')(1143,1156)
                  HAVING_CLAUSE(1156,1172)
                    PsiElement(having)('having')(1156,1162)
                    PsiWhiteSpace(' ')(1162,1163)
                    BINARY_COMPARE_EXPRESSION(1163,1172)
                      VARIABLE_REFERENCE_EXPRESSION(1163,1168)
                        SIMPLE_VARIABLE_REFERENCE(1163,1168)
                          NAME_REFERENCE(1163,1168)
                            PsiElement(identifier)('count')(1163,1168)
                      PsiWhiteSpace(' ')(1168,1169)
                      PsiElement(>)('>')(1169,1170)
                      PsiWhiteSpace(' ')(1170,1171)
                      SIMPLE_LITERAL_EXPRESSION(1171,1172)
                        SIMPLE_LITERAL(1171,1172)
                          INTEGER_LITERAL(1171,1172)
                            PsiElement(DECIMAL_INTEGER_LITERAL)('6')(1171,1172)
                PsiWhiteSpace('\n        ')(1172,1181)
                STREAMING_ACTION(1181,1509)
                  PsiElement(=>)('=>')(1181,1183)
                  PsiWhiteSpace(' ')(1183,1184)
                  PsiElement(()('(')(1184,1185)
                  PARAMETER(1185,1206)
                    PARAMETER_WITH_TYPE(1185,1206)
                      ARRAY_TYPE_NAME(1185,1199)
                        SIMPLE_TYPE_NAME(1185,1197)
                          REFERENCE_TYPE_NAME(1185,1197)
                            USER_DEFINE_TYPE_NAME(1185,1197)
                              NAME_REFERENCE(1185,1197)
                                PsiElement(identifier)('RequestCount')(1185,1197)
                        PsiElement([)('[')(1197,1198)
                        PsiElement(])(']')(1198,1199)
                      PsiWhiteSpace(' ')(1199,1200)
                      PsiElement(identifier)('counts')(1200,1206)
                  PsiElement())(')')(1206,1207)
                  PsiWhiteSpace(' ')(1207,1208)
                  PsiElement({)('{')(1208,1209)
                  PsiWhiteSpace('\n        ')(1209,1218)
                  PsiComment(LINE_COMMENT)('// `counts` is the output of the streaming rules and is published to the `requestCountStream`.')(1218,1312)
                  PsiWhiteSpace('\n        ')(1312,1321)
                  PsiComment(LINE_COMMENT)('// The `select` clause should match the structure of the `RequestCount` record.')(1321,1400)
                  PsiWhiteSpace('\n            ')(1400,1413)
                  BLOCK(1413,1499)
                    STATEMENT(1413,1499)
                      FOREACH_STATEMENT(1413,1499)
                        PsiElement(foreach)('foreach')(1413,1420)
                        PsiWhiteSpace(' ')(1420,1421)
                        PsiElement(var)('var')(1421,1424)
                        PsiWhiteSpace(' ')(1424,1425)
                        BINDING_PATTERN(1425,1426)
                          PsiElement(identifier)('c')(1425,1426)
                        PsiWhiteSpace(' ')(1426,1427)
                        PsiElement(in)('in')(1427,1429)
                        PsiWhiteSpace(' ')(1429,1430)
                        VARIABLE_REFERENCE_EXPRESSION(1430,1436)
                          SIMPLE_VARIABLE_REFERENCE(1430,1436)
                            NAME_REFERENCE(1430,1436)
                              PsiElement(identifier)('counts')(1430,1436)
                        PsiWhiteSpace(' ')(1436,1437)
                        PsiElement({)('{')(1437,1438)
                        PsiWhiteSpace('\n                ')(1438,1455)
                        BLOCK(1455,1485)
                          STATEMENT(1455,1485)
                            EXPRESSION_STMT(1455,1485)
                              VARIABLE_REFERENCE_EXPRESSION(1455,1484)
                                INVOCATION_REFERENCE(1455,1484)
                                  SIMPLE_VARIABLE_REFERENCE(1455,1473)
                                    NAME_REFERENCE(1455,1473)
                                      PsiElement(identifier)('requestCountStream')(1455,1473)
                                  INVOCATION(1473,1484)
                                    PsiElement(.)('.')(1473,1474)
                                    ANY_IDENTIFIER_NAME(1474,1481)
                                      PsiElement(identifier)('publish')(1474,1481)
                                    PsiElement(()('(')(1481,1482)
                                    INVOCATION_ARG_LIST(1482,1483)
                                      INVOCATION_ARG(1482,1483)
                                        VARIABLE_REFERENCE_EXPRESSION(1482,1483)
                                          SIMPLE_VARIABLE_REFERENCE(1482,1483)
                                            NAME_REFERENCE(1482,1483)
                                              PsiElement(identifier)('c')(1482,1483)
                                    PsiElement())(')')(1483,1484)
                              PsiElement(;)(';')(1484,1485)
                        PsiWhiteSpace('\n            ')(1485,1498)
                        PsiElement(})('}')(1498,1499)
                  PsiWhiteSpace('\n        ')(1499,1508)
                  PsiElement(})('}')(1508,1509)
            PsiWhiteSpace('\n    ')(1509,1514)
            PsiElement(})('}')(1514,1515)
        PsiWhiteSpace('\n')(1515,1516)
        PsiElement(})('}')(1516,1517)
  PsiWhiteSpace('\n\n')(1517,1519)
  PsiComment(LINE_COMMENT)('// Define the `printRequestCount` function.')(1519,1562)
  PsiWhiteSpace('\n')(1562,1563)
  DEFINITION(1563,1755)
    FUNCTION_DEFINITION(1563,1755)
      PsiElement(function)('function')(1563,1571)
      PsiWhiteSpace(' ')(1571,1572)
      CALLABLE_UNIT_SIGNATURE(1572,1612)
        ANY_IDENTIFIER_NAME(1572,1589)
          PsiElement(identifier)('printRequestCount')(1572,1589)
        PsiElement(()('(')(1589,1590)
        FORMAL_PARAMETER_LIST(1590,1611)
          PARAMETER(1590,1611)
            PARAMETER_WITH_TYPE(1590,1611)
              SIMPLE_TYPE_NAME(1590,1602)
                REFERENCE_TYPE_NAME(1590,1602)
                  USER_DEFINE_TYPE_NAME(1590,1602)
                    NAME_REFERENCE(1590,1602)
                      PsiElement(identifier)('RequestCount')(1590,1602)
              PsiWhiteSpace(' ')(1602,1603)
              PsiElement(identifier)('reqCount')(1603,1611)
        PsiElement())(')')(1611,1612)
      PsiWhiteSpace(' ')(1612,1613)
      CALLABLE_UNIT_BODY(1613,1755)
        PsiElement({)('{')(1613,1614)
        PsiWhiteSpace('\n    ')(1614,1619)
        STATEMENT(1619,1753)
          EXPRESSION_STMT(1619,1753)
            VARIABLE_REFERENCE_EXPRESSION(1619,1752)
              FUNCTION_INVOCATION_REFERENCE(1619,1752)
                FUNCTION_INVOCATION(1619,1752)
                  FUNCTION_NAME_REFERENCE(1619,1629)
                    PACKAGE_REFERENCE(1619,1622)
                      PsiElement(identifier)('io')(1619,1621)
                      PsiElement(:)(':')(1621,1622)
                    ANY_IDENTIFIER_NAME(1622,1629)
                      PsiElement(identifier)('println')(1622,1629)
                  PsiElement(()('(')(1629,1630)
                  INVOCATION_ARG_LIST(1630,1751)
                    INVOCATION_ARG(1630,1751)
                      BINARY_ADD_SUB_EXPRESSION(1630,1751)
                        BINARY_ADD_SUB_EXPRESSION(1630,1735)
                          SIMPLE_LITERAL_EXPRESSION(1630,1681)
                            SIMPLE_LITERAL(1630,1681)
                              PsiElement(QUOTED_STRING_LITERAL)('"ALERT!! : Received more than 6 requests from the "')(1630,1681)
                          PsiWhiteSpace(' ')(1681,1682)
                          PsiElement(+)('+')(1682,1683)
                          PsiWhiteSpace('\n                        ')(1683,1708)
                          SIMPLE_LITERAL_EXPRESSION(1708,1735)
                            SIMPLE_LITERAL(1708,1735)
                              PsiElement(QUOTED_STRING_LITERAL)('"host within 10 seconds : "')(1708,1735)
                        PsiWhiteSpace(' ')(1735,1736)
                        PsiElement(+)('+')(1736,1737)
                        PsiWhiteSpace(' ')(1737,1738)
                        VARIABLE_REFERENCE_EXPRESSION(1738,1751)
                          FIELD_VARIABLE_REFERENCE(1738,1751)
                            SIMPLE_VARIABLE_REFERENCE(1738,1746)
                              NAME_REFERENCE(1738,1746)
                                PsiElement(identifier)('reqCount')(1738,1746)
                            FIELD(1746,1751)
                              PsiElement(.)('.')(1746,1747)
                              PsiElement(identifier)('host')(1747,1751)
                  PsiElement())(')')(1751,1752)
            PsiElement(;)(';')(1752,1753)
        PsiWhiteSpace('\n')(1753,1754)
        PsiElement(})('}')(1754,1755)
  PsiWhiteSpace('\n\n')(1755,1757)
  DEFINITION(1757,1796)
    GLOBAL_VARIABLE_DEFINITION(1757,1796)
      PsiElement(listener)('listener')(1757,1765)
      PsiWhiteSpace(' ')(1765,1766)
      SIMPLE_TYPE_NAME(1766,1779)
        REFERENCE_TYPE_NAME(1766,1779)
          USER_DEFINE_TYPE_NAME(1766,1779)
            NAME_REFERENCE(1766,1779)
              PACKAGE_REFERENCE(1766,1771)
                PsiElement(identifier)('http')(1766,1770)
                PsiElement(:)(':')(1770,1771)
              PsiElement(identifier)('Listener')(1771,1779)
      PsiWhiteSpace(' ')(1779,1780)
      PsiElement(identifier)('ep')(1780,1782)
      PsiWhiteSpace(' ')(1782,1783)
      PsiElement(=)('=')(1783,1784)
      PsiWhiteSpace(' ')(1784,1785)
      TYPE_INIT_EXPRESSION(1785,1795)
        INIT_WITHOUT_TYPE(1785,1795)
          PsiElement(new)('new')(1785,1788)
          PsiWhiteSpace(' ')(1788,1789)
          PsiElement(()('(')(1789,1790)
          INVOCATION_ARG_LIST(1790,1794)
            INVOCATION_ARG(1790,1794)
              SIMPLE_LITERAL_EXPRESSION(1790,1794)
                SIMPLE_LITERAL(1790,1794)
                  INTEGER_LITERAL(1790,1794)
                    PsiElement(DECIMAL_INTEGER_LITERAL)('9090')(1790,1794)
          PsiElement())(')')(1794,1795)
      PsiElement(;)(';')(1795,1796)
  PsiWhiteSpace('\n\n')(1796,1798)
  DEFINITION(1798,2644)
    ANNOTATION_ATTACHMENT(1798,1839)
      PsiElement(@)('@')(1798,1799)
      NAME_REFERENCE(1799,1817)
        PACKAGE_REFERENCE(1799,1804)
          PsiElement(identifier)('http')(1799,1803)
          PsiElement(:)(':')(1803,1804)
        PsiElement(identifier)('ServiceConfig')(1804,1817)
      PsiWhiteSpace(' ')(1817,1818)
      RECORD_LITERAL(1818,1839)
        PsiElement({)('{')(1818,1819)
        PsiWhiteSpace('\n    ')(1819,1824)
        RECORD_LITERAL_BODY(1824,1837)
          RECORD_KEY_VALUE(1824,1837)
            RECORD_KEY(1824,1832)
              VARIABLE_REFERENCE_EXPRESSION(1824,1832)
                SIMPLE_VARIABLE_REFERENCE(1824,1832)
                  NAME_REFERENCE(1824,1832)
                    PsiElement(identifier)('basePath')(1824,1832)
            PsiElement(:)(':')(1832,1833)
            PsiWhiteSpace(' ')(1833,1834)
            SIMPLE_LITERAL_EXPRESSION(1834,1837)
              SIMPLE_LITERAL(1834,1837)
                PsiElement(QUOTED_STRING_LITERAL)('"/"')(1834,1837)
        PsiWhiteSpace('\n')(1837,1838)
        PsiElement(})('}')(1838,1839)
    PsiWhiteSpace('\n')(1839,1840)
    PsiComment(LINE_COMMENT)('// The host header is extracted from the requests that come to the service using the `/requests` context. Using this')(1840,1956)
    PsiWhiteSpace('\n')(1956,1957)
    PsiComment(LINE_COMMENT)('// information, the `clientRequest` object is created and published to the `requestStream`.')(1957,2048)
    PsiWhiteSpace('\n')(2048,2049)
    DEFINITION(2049,2644)
      SERVICE_DEFINITION(2049,2644)
        PsiElement(service)('service')(2049,2056)
        PsiWhiteSpace(' ')(2056,2057)
        PsiElement(identifier)('requestService')(2057,2071)
        PsiWhiteSpace(' ')(2071,2072)
        PsiElement(on)('on')(2072,2074)
        PsiWhiteSpace(' ')(2074,2075)
        EXPRESSION_LIST(2075,2077)
          VARIABLE_REFERENCE_EXPRESSION(2075,2077)
            SIMPLE_VARIABLE_REFERENCE(2075,2077)
              NAME_REFERENCE(2075,2077)
                PsiElement(identifier)('ep')(2075,2077)
        PsiWhiteSpace(' ')(2077,2078)
        SERVICE_BODY(2078,2644)
          PsiElement({)('{')(2078,2079)
          PsiWhiteSpace('\n\n    ')(2079,2085)
          SERVICE_BODY_MEMBER(2085,2137)
            OBJECT_FIELD_DEFINITION(2085,2137)
              SIMPLE_TYPE_NAME(2085,2095)
                REFERENCE_TYPE_NAME(2085,2095)
                  BUILT_IN_REFERENCE_TYPE_NAME(2085,2095)
                    FUTURE_TYPE_NAME(2085,2095)
                      PsiElement(future)('future')(2085,2091)
                      PsiElement(<)('<')(2091,2092)
                      SIMPLE_TYPE_NAME(2092,2094)
                        EMPTY_TUPLE_LITERAL(2092,2094)
                          PsiElement(()('(')(2092,2093)
                          PsiElement())(')')(2093,2094)
                      PsiElement(>)('>')(2094,2095)
              PsiWhiteSpace(' ')(2095,2096)
              PsiElement(identifier)('ftr')(2096,2099)
              PsiWhiteSpace(' ')(2099,2100)
              PsiElement(=)('=')(2100,2101)
              PsiWhiteSpace(' ')(2101,2102)
              VARIABLE_REFERENCE_EXPRESSION(2102,2136)
                PsiElement(start)('start')(2102,2107)
                PsiWhiteSpace(' ')(2107,2108)
                FUNCTION_INVOCATION_REFERENCE(2108,2136)
                  FUNCTION_INVOCATION(2108,2136)
                    FUNCTION_NAME_REFERENCE(2108,2134)
                      ANY_IDENTIFIER_NAME(2108,2134)
                        PsiElement(identifier)('initRealtimeRequestCounter')(2108,2134)
                    PsiElement(()('(')(2134,2135)
                    PsiElement())(')')(2135,2136)
              PsiElement(;)(';')(2136,2137)
          PsiWhiteSpace('\n\n    ')(2137,2143)
          SERVICE_BODY_MEMBER(2143,2642)
            OBJECT_FUNCTION_DEFINITION(2143,2642)
              ANNOTATION_ATTACHMENT(2143,2224)
                PsiElement(@)('@')(2143,2144)
                NAME_REFERENCE(2144,2163)
                  PACKAGE_REFERENCE(2144,2149)
                    PsiElement(identifier)('http')(2144,2148)
                    PsiElement(:)(':')(2148,2149)
                  PsiElement(identifier)('ResourceConfig')(2149,2163)
                PsiWhiteSpace(' ')(2163,2164)
                RECORD_LITERAL(2164,2224)
                  PsiElement({)('{')(2164,2165)
                  PsiWhiteSpace('\n        ')(2165,2174)
                  RECORD_LITERAL_BODY(2174,2218)
                    RECORD_KEY_VALUE(2174,2191)
                      RECORD_KEY(2174,2181)
                        VARIABLE_REFERENCE_EXPRESSION(2174,2181)
                          SIMPLE_VARIABLE_REFERENCE(2174,2181)
                            NAME_REFERENCE(2174,2181)
                              PsiElement(identifier)('methods')(2174,2181)
                      PsiElement(:)(':')(2181,2182)
                      PsiWhiteSpace(' ')(2182,2183)
                      ARRAY_LITERAL_EXPRESSION(2183,2191)
                        ARRAY_LITERAL(2183,2191)
                          PsiElement([)('[')(2183,2184)
                          EXPRESSION_LIST(2184,2190)
                            SIMPLE_LITERAL_EXPRESSION(2184,2190)
                              SIMPLE_LITERAL(2184,2190)
                                PsiElement(QUOTED_STRING_LITERAL)('"POST"')(2184,2190)
                          PsiElement(])(']')(2190,2191)
                    PsiElement(,)(',')(2191,2192)
                    PsiWhiteSpace('\n        ')(2192,2201)
                    RECORD_KEY_VALUE(2201,2218)
                      RECORD_KEY(2201,2205)
                        VARIABLE_REFERENCE_EXPRESSION(2201,2205)
                          SIMPLE_VARIABLE_REFERENCE(2201,2205)
                            NAME_REFERENCE(2201,2205)
                              PsiElement(identifier)('path')(2201,2205)
                      PsiElement(:)(':')(2205,2206)
                      PsiWhiteSpace(' ')(2206,2207)
                      SIMPLE_LITERAL_EXPRESSION(2207,2218)
                        SIMPLE_LITERAL(2207,2218)
                          PsiElement(QUOTED_STRING_LITERAL)('"/requests"')(2207,2218)
                  PsiWhiteSpace('\n    ')(2218,2223)
                  PsiElement(})('}')(2223,2224)
              PsiWhiteSpace('\n    ')(2224,2229)
              PsiElement(resource)('resource')(2229,2237)
              PsiWhiteSpace(' ')(2237,2238)
              PsiElement(function)('function')(2238,2246)
              PsiWhiteSpace(' ')(2246,2247)
              CALLABLE_UNIT_SIGNATURE(2247,2291)
                ANY_IDENTIFIER_NAME(2247,2255)
                  PsiElement(identifier)('requests')(2247,2255)
                PsiElement(()('(')(2255,2256)
                FORMAL_PARAMETER_LIST(2256,2290)
                  PARAMETER(2256,2272)
                    PARAMETER_WITH_TYPE(2256,2272)
                      SIMPLE_TYPE_NAME(2256,2267)
                        REFERENCE_TYPE_NAME(2256,2267)
                          USER_DEFINE_TYPE_NAME(2256,2267)
                            NAME_REFERENCE(2256,2267)
                              PACKAGE_REFERENCE(2256,2261)
                                PsiElement(identifier)('http')(2256,2260)
                                PsiElement(:)(':')(2260,2261)
                              PsiElement(identifier)('Caller')(2261,2267)
                      PsiWhiteSpace(' ')(2267,2268)
                      PsiElement(identifier)('conn')(2268,2272)
                  PsiElement(,)(',')(2272,2273)
                  PsiWhiteSpace(' ')(2273,2274)
                  PARAMETER(2274,2290)
                    PARAMETER_WITH_TYPE(2274,2290)
                      SIMPLE_TYPE_NAME(2274,2286)
                        REFERENCE_TYPE_NAME(2274,2286)
                          USER_DEFINE_TYPE_NAME(2274,2286)
                            NAME_REFERENCE(2274,2286)
                              PACKAGE_REFERENCE(2274,2279)
                                PsiElement(identifier)('http')(2274,2278)
                                PsiElement(:)(':')(2278,2279)
                              PsiElement(identifier)('Request')(2279,2286)
                      PsiWhiteSpace(' ')(2286,2287)
                      PsiElement(identifier)('req')(2287,2290)
                PsiElement())(')')(2290,2291)
              PsiWhiteSpace(' ')(2291,2292)
              CALLABLE_UNIT_BODY(2292,2642)
                PsiElement({)('{')(2292,2293)
                PsiWhiteSpace('\n        ')(2293,2302)
                STATEMENT(2302,2352)
                  VARIABLE_DEFINITION_STATEMENT(2302,2352)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(2302,2352)
                      SIMPLE_TYPE_NAME(2302,2308)
                        VALUE_TYPE_NAME(2302,2308)
                          PsiElement(string)('string')(2302,2308)
                      PsiWhiteSpace(' ')(2308,2309)
                      BINDING_PATTERN(2309,2317)
                        PsiElement(identifier)('hostName')(2309,2317)
                      PsiWhiteSpace(' ')(2317,2318)
                      PsiElement(=)('=')(2318,2319)
                      PsiWhiteSpace(' ')(2319,2320)
                      UNARY_EXPRESSION(2320,2351)
                        PsiElement(untaint)('untaint')(2320,2327)
                        PsiWhiteSpace(' ')(2327,2328)
                        VARIABLE_REFERENCE_EXPRESSION(2328,2351)
                          FIELD_VARIABLE_REFERENCE(2328,2351)
                            FIELD_VARIABLE_REFERENCE(2328,2346)
                              SIMPLE_VARIABLE_REFERENCE(2328,2332)
                                NAME_REFERENCE(2328,2332)
                                  PsiElement(identifier)('conn')(2328,2332)
                              FIELD(2332,2346)
                                PsiElement(.)('.')(2332,2333)
                                PsiElement(identifier)('remoteAddress')(2333,2346)
                            FIELD(2346,2351)
                              PsiElement(.)('.')(2346,2347)
                              PsiElement(identifier)('host')(2347,2351)
                      PsiElement(;)(';')(2351,2352)
                PsiWhiteSpace('\n        ')(2352,2361)
                STATEMENT(2361,2410)
                  VARIABLE_DEFINITION_STATEMENT(2361,2410)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(2361,2410)
                      SIMPLE_TYPE_NAME(2361,2374)
                        REFERENCE_TYPE_NAME(2361,2374)
                          USER_DEFINE_TYPE_NAME(2361,2374)
                            NAME_REFERENCE(2361,2374)
                              PsiElement(identifier)('ClientRequest')(2361,2374)
                      PsiWhiteSpace(' ')(2374,2375)
                      BINDING_PATTERN(2375,2388)
                        PsiElement(identifier)('clientRequest')(2375,2388)
                      PsiWhiteSpace(' ')(2388,2389)
                      PsiElement(=)('=')(2389,2390)
                      PsiWhiteSpace(' ')(2390,2391)
                      RECORD_LITERAL_EXPRESSION(2391,2409)
                        RECORD_LITERAL(2391,2409)
                          PsiElement({)('{')(2391,2392)
                          PsiWhiteSpace(' ')(2392,2393)
                          RECORD_LITERAL_BODY(2393,2407)
                            RECORD_KEY_VALUE(2393,2407)
                              RECORD_KEY(2393,2397)
                                VARIABLE_REFERENCE_EXPRESSION(2393,2397)
                                  SIMPLE_VARIABLE_REFERENCE(2393,2397)
                                    NAME_REFERENCE(2393,2397)
                                      PsiElement(identifier)('host')(2393,2397)
                              PsiElement(:)(':')(2397,2398)
                              PsiWhiteSpace(' ')(2398,2399)
                              VARIABLE_REFERENCE_EXPRESSION(2399,2407)
                                SIMPLE_VARIABLE_REFERENCE(2399,2407)
                                  NAME_REFERENCE(2399,2407)
                                    PsiElement(identifier)('hostName')(2399,2407)
                          PsiWhiteSpace(' ')(2407,2408)
                          PsiElement(})('}')(2408,2409)
                      PsiElement(;)(';')(2409,2410)
                PsiWhiteSpace('\n        ')(2410,2419)
                STATEMENT(2419,2456)
                  EXPRESSION_STMT(2419,2456)
                    VARIABLE_REFERENCE_EXPRESSION(2419,2455)
                      INVOCATION_REFERENCE(2419,2455)
                        SIMPLE_VARIABLE_REFERENCE(2419,2432)
                          NAME_REFERENCE(2419,2432)
                            PsiElement(identifier)('requestStream')(2419,2432)
                        INVOCATION(2432,2455)
                          PsiElement(.)('.')(2432,2433)
                          ANY_IDENTIFIER_NAME(2433,2440)
                            PsiElement(identifier)('publish')(2433,2440)
                          PsiElement(()('(')(2440,2441)
                          INVOCATION_ARG_LIST(2441,2454)
                            INVOCATION_ARG(2441,2454)
                              VARIABLE_REFERENCE_EXPRESSION(2441,2454)
                                SIMPLE_VARIABLE_REFERENCE(2441,2454)
                                  NAME_REFERENCE(2441,2454)
                                    PsiElement(identifier)('clientRequest')(2441,2454)
                          PsiElement())(')')(2454,2455)
                    PsiElement(;)(';')(2455,2456)
                PsiWhiteSpace('\n\n        ')(2456,2466)
                STATEMENT(2466,2490)
                  VARIABLE_DEFINITION_STATEMENT(2466,2490)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(2466,2490)
                      SIMPLE_TYPE_NAME(2466,2479)
                        REFERENCE_TYPE_NAME(2466,2479)
                          USER_DEFINE_TYPE_NAME(2466,2479)
                            NAME_REFERENCE(2466,2479)
                              PACKAGE_REFERENCE(2466,2471)
                                PsiElement(identifier)('http')(2466,2470)
                                PsiElement(:)(':')(2470,2471)
                              PsiElement(identifier)('Response')(2471,2479)
                      PsiWhiteSpace(' ')(2479,2480)
                      BINDING_PATTERN(2480,2483)
                        PsiElement(identifier)('res')(2480,2483)
                      PsiWhiteSpace(' ')(2483,2484)
                      PsiElement(=)('=')(2484,2485)
                      PsiWhiteSpace(' ')(2485,2486)
                      TYPE_INIT_EXPRESSION(2486,2489)
                        INIT_WITHOUT_TYPE(2486,2489)
                          PsiElement(new)('new')(2486,2489)
                      PsiElement(;)(';')(2489,2490)
                PsiWhiteSpace('\n        ')(2490,2499)
                STATEMENT(2499,2604)
                  EXPRESSION_STMT(2499,2604)
                    VARIABLE_REFERENCE_EXPRESSION(2499,2603)
                      INVOCATION_REFERENCE(2499,2603)
                        SIMPLE_VARIABLE_REFERENCE(2499,2502)
                          NAME_REFERENCE(2499,2502)
                            PsiElement(identifier)('res')(2499,2502)
                        INVOCATION(2502,2603)
                          PsiElement(.)('.')(2502,2503)
                          ANY_IDENTIFIER_NAME(2503,2517)
                            PsiElement(identifier)('setJsonPayload')(2503,2517)
                          PsiElement(()('(')(2517,2518)
                          INVOCATION_ARG_LIST(2518,2602)
                            INVOCATION_ARG(2518,2602)
                              BINARY_ADD_SUB_EXPRESSION(2518,2602)
                                SIMPLE_LITERAL_EXPRESSION(2518,2555)
                                  SIMPLE_LITERAL(2518,2555)
                                    PsiElement(QUOTED_STRING_LITERAL)('"{'message' : 'request successfully "')(2518,2555)
                                PsiWhiteSpace(' ')(2555,2556)
                                PsiElement(+)('+')(2556,2557)
                                PsiWhiteSpace('\n                                ')(2557,2590)
                                SIMPLE_LITERAL_EXPRESSION(2590,2602)
                                  SIMPLE_LITERAL(2590,2602)
                                    PsiElement(QUOTED_STRING_LITERAL)('"received'}"')(2590,2602)
                          PsiElement())(')')(2602,2603)
                    PsiElement(;)(';')(2603,2604)
                PsiWhiteSpace('\n        ')(2604,2613)
                STATEMENT(2613,2636)
                  ASSIGNMENT_STATEMENT(2613,2636)
                    SIMPLE_VARIABLE_REFERENCE(2613,2614)
                      NAME_REFERENCE(2613,2614)
                        PsiElement(identifier)('_')(2613,2614)
                    PsiWhiteSpace(' ')(2614,2615)
                    PsiElement(=)('=')(2615,2616)
                    PsiWhiteSpace(' ')(2616,2617)
                    ACTION_INVOCATION_EXPRESSION(2617,2635)
                      ACTION_INVOCATION(2617,2635)
                        SIMPLE_VARIABLE_REFERENCE(2617,2621)
                          NAME_REFERENCE(2617,2621)
                            PsiElement(identifier)('conn')(2617,2621)
                        PsiElement(->)('->')(2621,2623)
                        FUNCTION_INVOCATION(2623,2635)
                          FUNCTION_NAME_REFERENCE(2623,2630)
                            ANY_IDENTIFIER_NAME(2623,2630)
                              PsiElement(identifier)('respond')(2623,2630)
                          PsiElement(()('(')(2630,2631)
                          INVOCATION_ARG_LIST(2631,2634)
                            INVOCATION_ARG(2631,2634)
                              VARIABLE_REFERENCE_EXPRESSION(2631,2634)
                                SIMPLE_VARIABLE_REFERENCE(2631,2634)
                                  NAME_REFERENCE(2631,2634)
                                    PsiElement(identifier)('res')(2631,2634)
                          PsiElement())(')')(2634,2635)
                    PsiElement(;)(';')(2635,2636)
                PsiWhiteSpace('\n    ')(2636,2641)
                PsiElement(})('}')(2641,2642)
          PsiWhiteSpace('\n')(2642,2643)
          PsiElement(})('}')(2643,2644)
