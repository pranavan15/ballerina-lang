Ballerina File(0,2600)
  IMPORT_DECLARATION(0,22)
    PsiElement(import)('import')(0,6)
    PsiWhiteSpace(' ')(6,7)
    ORG_NAME(7,16)
      PsiElement(identifier)('ballerina')(7,16)
    PsiElement(/)('/')(16,17)
    COMPLETE_PACKAGE_NAME(17,21)
      PACKAGE_NAME(17,21)
        PsiElement(identifier)('http')(17,21)
    PsiElement(;)(';')(21,22)
  PsiWhiteSpace('\n')(22,23)
  IMPORT_DECLARATION(23,43)
    PsiElement(import)('import')(23,29)
    PsiWhiteSpace(' ')(29,30)
    ORG_NAME(30,39)
      PsiElement(identifier)('ballerina')(30,39)
    PsiElement(/)('/')(39,40)
    COMPLETE_PACKAGE_NAME(40,42)
      PACKAGE_NAME(40,42)
        PsiElement(identifier)('io')(40,42)
    PsiElement(;)(';')(42,43)
  PsiWhiteSpace('\n')(43,44)
  IMPORT_DECLARATION(44,65)
    PsiElement(import)('import')(44,50)
    PsiWhiteSpace(' ')(50,51)
    ORG_NAME(51,60)
      PsiElement(identifier)('ballerina')(51,60)
    PsiElement(/)('/')(60,61)
    COMPLETE_PACKAGE_NAME(61,64)
      PACKAGE_NAME(61,64)
        PsiElement(identifier)('log')(61,64)
    PsiElement(;)(';')(64,65)
  PsiWhiteSpace('\n')(65,66)
  IMPORT_DECLARATION(66,96)
    PsiElement(import)('import')(66,72)
    PsiWhiteSpace(' ')(72,73)
    ORG_NAME(73,82)
      PsiElement(identifier)('ballerina')(73,82)
    PsiElement(/)('/')(82,83)
    COMPLETE_PACKAGE_NAME(83,95)
      PACKAGE_NAME(83,95)
        PsiElement(identifier)('transactions')(83,95)
    PsiElement(;)(';')(95,96)
  PsiWhiteSpace('\n\n')(96,98)
  PsiComment(LINE_COMMENT)('// This service is a participant in the distributed transaction. It will get')(98,174)
  PsiWhiteSpace('\n')(174,175)
  PsiComment(LINE_COMMENT)('// infected when it receives a transaction context from the participant. The')(175,251)
  PsiWhiteSpace('\n')(251,252)
  PsiComment(LINE_COMMENT)('// transaction context, in the HTTP case, will be passed in as custom HTTP headers.')(252,335)
  PsiWhiteSpace('\n')(335,336)
  DEFINITION(336,2131)
    ANNOTATION_ATTACHMENT(336,387)
      PsiElement(@)('@')(336,337)
      NAME_REFERENCE(337,355)
        PACKAGE_REFERENCE(337,342)
          PsiElement(identifier)('http')(337,341)
          PsiElement(:)(':')(341,342)
        PsiElement(identifier)('ServiceConfig')(342,355)
      PsiWhiteSpace(' ')(355,356)
      RECORD_LITERAL(356,387)
        PsiElement({)('{')(356,357)
        PsiWhiteSpace('\n    ')(357,362)
        RECORD_LITERAL_BODY(362,385)
          RECORD_KEY_VALUE(362,385)
            RECORD_KEY(362,370)
              VARIABLE_REFERENCE_EXPRESSION(362,370)
                SIMPLE_VARIABLE_REFERENCE(362,370)
                  NAME_REFERENCE(362,370)
                    PsiElement(identifier)('basePath')(362,370)
            PsiElement(:)(':')(370,371)
            PsiWhiteSpace(' ')(371,372)
            SIMPLE_LITERAL_EXPRESSION(372,385)
              SIMPLE_LITERAL(372,385)
                PsiElement(QUOTED_STRING_LITERAL)('"/stockquote"')(372,385)
        PsiWhiteSpace('\n')(385,386)
        PsiElement(})('}')(386,387)
    PsiWhiteSpace('\n')(387,388)
    DEFINITION(388,2131)
      SERVICE_DEFINITION(388,2131)
        PsiElement(service)('service')(388,395)
        PsiWhiteSpace(' ')(395,396)
        PsiElement(identifier)('ParticipantService')(396,414)
        PsiWhiteSpace(' ')(414,415)
        PsiElement(on)('on')(415,417)
        PsiWhiteSpace(' ')(417,418)
        EXPRESSION_LIST(418,441)
          TYPE_INIT_EXPRESSION(418,441)
            INIT_WITH_TYPE(418,441)
              PsiElement(new)('new')(418,421)
              PsiWhiteSpace(' ')(421,422)
              USER_DEFINE_TYPE_NAME(422,435)
                NAME_REFERENCE(422,435)
                  PACKAGE_REFERENCE(422,427)
                    PsiElement(identifier)('http')(422,426)
                    PsiElement(:)(':')(426,427)
                  PsiElement(identifier)('Listener')(427,435)
              PsiElement(()('(')(435,436)
              INVOCATION_ARG_LIST(436,440)
                INVOCATION_ARG(436,440)
                  SIMPLE_LITERAL_EXPRESSION(436,440)
                    SIMPLE_LITERAL(436,440)
                      INTEGER_LITERAL(436,440)
                        PsiElement(DECIMAL_INTEGER_LITERAL)('8889')(436,440)
              PsiElement())(')')(440,441)
        PsiWhiteSpace(' ')(441,442)
        SERVICE_BODY(442,2131)
          PsiElement({)('{')(442,443)
          PsiWhiteSpace('\n\n    ')(443,449)
          SERVICE_BODY_MEMBER(449,2129)
            OBJECT_FUNCTION_DEFINITION(449,2129)
              ANNOTATION_ATTACHMENT(449,501)
                PsiElement(@)('@')(449,450)
                NAME_REFERENCE(450,469)
                  PACKAGE_REFERENCE(450,455)
                    PsiElement(identifier)('http')(450,454)
                    PsiElement(:)(':')(454,455)
                  PsiElement(identifier)('ResourceConfig')(455,469)
                PsiWhiteSpace(' ')(469,470)
                RECORD_LITERAL(470,501)
                  PsiElement({)('{')(470,471)
                  PsiWhiteSpace('\n        ')(471,480)
                  RECORD_LITERAL_BODY(480,495)
                    RECORD_KEY_VALUE(480,495)
                      RECORD_KEY(480,484)
                        VARIABLE_REFERENCE_EXPRESSION(480,484)
                          SIMPLE_VARIABLE_REFERENCE(480,484)
                            NAME_REFERENCE(480,484)
                              PsiElement(identifier)('path')(480,484)
                      PsiElement(:)(':')(484,485)
                      PsiWhiteSpace(' ')(485,486)
                      SIMPLE_LITERAL_EXPRESSION(486,495)
                        SIMPLE_LITERAL(486,495)
                          PsiElement(QUOTED_STRING_LITERAL)('"/update"')(486,495)
                  PsiWhiteSpace('\n    ')(495,500)
                  PsiElement(})('}')(500,501)
              PsiWhiteSpace('\n    ')(501,506)
              ANNOTATION_ATTACHMENT(506,618)
                PsiElement(@)('@')(506,507)
                NAME_REFERENCE(507,531)
                  PACKAGE_REFERENCE(507,520)
                    PsiElement(identifier)('transactions')(507,519)
                    PsiElement(:)(':')(519,520)
                  PsiElement(identifier)('Participant')(520,531)
                PsiWhiteSpace(' ')(531,532)
                RECORD_LITERAL(532,618)
                  PsiElement({)('{')(532,533)
                  PsiWhiteSpace('\n        ')(533,542)
                  RECORD_LITERAL_BODY(542,612)
                    RECORD_KEY_VALUE(542,573)
                      RECORD_KEY(542,550)
                        VARIABLE_REFERENCE_EXPRESSION(542,550)
                          SIMPLE_VARIABLE_REFERENCE(542,550)
                            NAME_REFERENCE(542,550)
                              PsiElement(identifier)('oncommit')(542,550)
                      PsiElement(:)(':')(550,551)
                      VARIABLE_REFERENCE_EXPRESSION(551,573)
                        SIMPLE_VARIABLE_REFERENCE(551,573)
                          NAME_REFERENCE(551,573)
                            PsiElement(identifier)('printParticipantCommit')(551,573)
                    PsiElement(,)(',')(573,574)
                    PsiWhiteSpace('\n        ')(574,583)
                    RECORD_KEY_VALUE(583,612)
                      RECORD_KEY(583,590)
                        VARIABLE_REFERENCE_EXPRESSION(583,590)
                          SIMPLE_VARIABLE_REFERENCE(583,590)
                            NAME_REFERENCE(583,590)
                              PsiElement(identifier)('onabort')(583,590)
                      PsiElement(:)(':')(590,591)
                      VARIABLE_REFERENCE_EXPRESSION(591,612)
                        SIMPLE_VARIABLE_REFERENCE(591,612)
                          NAME_REFERENCE(591,612)
                            PsiElement(identifier)('printParticipantAbort')(591,612)
                  PsiWhiteSpace('\n    ')(612,617)
                  PsiElement(})('}')(617,618)
              PsiWhiteSpace('\n    ')(618,623)
              PsiElement(resource)('resource')(623,631)
              PsiWhiteSpace(' ')(631,632)
              PsiElement(function)('function')(632,640)
              PsiWhiteSpace(' ')(640,641)
              CALLABLE_UNIT_SIGNATURE(641,693)
                ANY_IDENTIFIER_NAME(641,657)
                  PsiElement(identifier)('updateStockQuote')(641,657)
                PsiElement(()('(')(657,658)
                FORMAL_PARAMETER_LIST(658,692)
                  PARAMETER(658,674)
                    PARAMETER_WITH_TYPE(658,674)
                      SIMPLE_TYPE_NAME(658,669)
                        REFERENCE_TYPE_NAME(658,669)
                          USER_DEFINE_TYPE_NAME(658,669)
                            NAME_REFERENCE(658,669)
                              PACKAGE_REFERENCE(658,663)
                                PsiElement(identifier)('http')(658,662)
                                PsiElement(:)(':')(662,663)
                              PsiElement(identifier)('Caller')(663,669)
                      PsiWhiteSpace(' ')(669,670)
                      PsiElement(identifier)('conn')(670,674)
                  PsiElement(,)(',')(674,675)
                  PsiWhiteSpace(' ')(675,676)
                  PARAMETER(676,692)
                    PARAMETER_WITH_TYPE(676,692)
                      SIMPLE_TYPE_NAME(676,688)
                        REFERENCE_TYPE_NAME(676,688)
                          USER_DEFINE_TYPE_NAME(676,688)
                            NAME_REFERENCE(676,688)
                              PACKAGE_REFERENCE(676,681)
                                PsiElement(identifier)('http')(676,680)
                                PsiElement(:)(':')(680,681)
                              PsiElement(identifier)('Request')(681,688)
                      PsiWhiteSpace(' ')(688,689)
                      PsiElement(identifier)('req')(689,692)
                PsiElement())(')')(692,693)
              PsiWhiteSpace(' ')(693,694)
              CALLABLE_UNIT_BODY(694,2129)
                PsiElement({)('{')(694,695)
                PsiWhiteSpace('\n        ')(695,704)
                STATEMENT(704,756)
                  EXPRESSION_STMT(704,756)
                    VARIABLE_REFERENCE_EXPRESSION(704,755)
                      FUNCTION_INVOCATION_REFERENCE(704,755)
                        FUNCTION_INVOCATION(704,755)
                          FUNCTION_NAME_REFERENCE(704,717)
                            PACKAGE_REFERENCE(704,708)
                              PsiElement(identifier)('log')(704,707)
                              PsiElement(:)(':')(707,708)
                            ANY_IDENTIFIER_NAME(708,717)
                              PsiElement(identifier)('printInfo')(708,717)
                          PsiElement(()('(')(717,718)
                          INVOCATION_ARG_LIST(718,754)
                            INVOCATION_ARG(718,754)
                              SIMPLE_LITERAL_EXPRESSION(718,754)
                                SIMPLE_LITERAL(718,754)
                                  PsiElement(QUOTED_STRING_LITERAL)('"Received update stockquote request"')(718,754)
                          PsiElement())(')')(754,755)
                    PsiElement(;)(';')(755,756)
                PsiWhiteSpace('\n        ')(756,765)
                STATEMENT(765,789)
                  VARIABLE_DEFINITION_STATEMENT(765,789)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(765,789)
                      SIMPLE_TYPE_NAME(765,778)
                        REFERENCE_TYPE_NAME(765,778)
                          USER_DEFINE_TYPE_NAME(765,778)
                            NAME_REFERENCE(765,778)
                              PACKAGE_REFERENCE(765,770)
                                PsiElement(identifier)('http')(765,769)
                                PsiElement(:)(':')(769,770)
                              PsiElement(identifier)('Response')(770,778)
                      PsiWhiteSpace(' ')(778,779)
                      BINDING_PATTERN(779,782)
                        PsiElement(identifier)('res')(779,782)
                      PsiWhiteSpace(' ')(782,783)
                      PsiElement(=)('=')(783,784)
                      PsiWhiteSpace(' ')(784,785)
                      TYPE_INIT_EXPRESSION(785,788)
                        INIT_WITHOUT_TYPE(785,788)
                          PsiElement(new)('new')(785,788)
                      PsiElement(;)(';')(788,789)
                PsiWhiteSpace('\n\n        ')(789,799)
                PsiComment(LINE_COMMENT)('// At the beginning of the transaction statement, since a transaction')(799,868)
                PsiWhiteSpace('\n        ')(868,877)
                PsiComment(LINE_COMMENT)('// context has been received, this service will register with the')(877,942)
                PsiWhiteSpace('\n        ')(942,951)
                PsiComment(LINE_COMMENT)('// initiator as a participant.')(951,981)
                PsiWhiteSpace('\n\n        ')(981,991)
                PsiComment(LINE_COMMENT)('// Print the current transaction ID')(991,1026)
                PsiWhiteSpace('\n        ')(1026,1035)
                STATEMENT(1035,1137)
                  EXPRESSION_STMT(1035,1137)
                    VARIABLE_REFERENCE_EXPRESSION(1035,1136)
                      FUNCTION_INVOCATION_REFERENCE(1035,1136)
                        FUNCTION_INVOCATION(1035,1136)
                          FUNCTION_NAME_REFERENCE(1035,1048)
                            PACKAGE_REFERENCE(1035,1039)
                              PsiElement(identifier)('log')(1035,1038)
                              PsiElement(:)(':')(1038,1039)
                            ANY_IDENTIFIER_NAME(1039,1048)
                              PsiElement(identifier)('printInfo')(1039,1048)
                          PsiElement(()('(')(1048,1049)
                          INVOCATION_ARG_LIST(1049,1135)
                            INVOCATION_ARG(1049,1135)
                              BINARY_ADD_SUB_EXPRESSION(1049,1135)
                                SIMPLE_LITERAL_EXPRESSION(1049,1071)
                                  SIMPLE_LITERAL(1049,1071)
                                    PsiElement(QUOTED_STRING_LITERAL)('"Joined transaction: "')(1049,1071)
                                PsiWhiteSpace(' ')(1071,1072)
                                PsiElement(+)('+')(1072,1073)
                                PsiWhiteSpace('\n                       ')(1073,1097)
                                VARIABLE_REFERENCE_EXPRESSION(1097,1135)
                                  FUNCTION_INVOCATION_REFERENCE(1097,1135)
                                    FUNCTION_INVOCATION(1097,1135)
                                      FUNCTION_NAME_REFERENCE(1097,1133)
                                        PACKAGE_REFERENCE(1097,1110)
                                          PsiElement(identifier)('transactions')(1097,1109)
                                          PsiElement(:)(':')(1109,1110)
                                        ANY_IDENTIFIER_NAME(1110,1133)
                                          PsiElement(identifier)('getCurrentTransactionId')(1110,1133)
                                      PsiElement(()('(')(1133,1134)
                                      PsiElement())(')')(1134,1135)
                          PsiElement())(')')(1135,1136)
                    PsiElement(;)(';')(1136,1137)
                PsiWhiteSpace('\n\n        ')(1137,1147)
                STATEMENT(1147,1192)
                  VARIABLE_DEFINITION_STATEMENT(1147,1192)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1147,1192)
                      PsiElement(var)('var')(1147,1150)
                      PsiWhiteSpace(' ')(1150,1151)
                      BINDING_PATTERN(1151,1160)
                        PsiElement(identifier)('updateReq')(1151,1160)
                      PsiWhiteSpace(' ')(1160,1161)
                      PsiElement(=)('=')(1161,1162)
                      PsiWhiteSpace(' ')(1162,1163)
                      UNARY_EXPRESSION(1163,1191)
                        PsiElement(untaint)('untaint')(1163,1170)
                        PsiWhiteSpace(' ')(1170,1171)
                        VARIABLE_REFERENCE_EXPRESSION(1171,1191)
                          INVOCATION_REFERENCE(1171,1191)
                            SIMPLE_VARIABLE_REFERENCE(1171,1174)
                              NAME_REFERENCE(1171,1174)
                                PsiElement(identifier)('req')(1171,1174)
                            INVOCATION(1174,1191)
                              PsiElement(.)('.')(1174,1175)
                              ANY_IDENTIFIER_NAME(1175,1189)
                                PsiElement(identifier)('getJsonPayload')(1175,1189)
                              PsiElement(()('(')(1189,1190)
                              PsiElement())(')')(1190,1191)
                      PsiElement(;)(';')(1191,1192)
                PsiWhiteSpace('\n        ')(1192,1201)
                STATEMENT(1201,1841)
                  IF_ELSE_STATEMENT(1201,1841)
                    IF_CLAUSE(1201,1643)
                      PsiElement(if)('if')(1201,1203)
                      PsiWhiteSpace(' ')(1203,1204)
                      BRACED_OR_TUPLE_EXPRESSION(1204,1223)
                        TUPLE_LITERAL(1204,1223)
                          PsiElement(()('(')(1204,1205)
                          TYPE_TEST_EXPRESSION(1205,1222)
                            VARIABLE_REFERENCE_EXPRESSION(1205,1214)
                              SIMPLE_VARIABLE_REFERENCE(1205,1214)
                                NAME_REFERENCE(1205,1214)
                                  PsiElement(identifier)('updateReq')(1205,1214)
                            PsiWhiteSpace(' ')(1214,1215)
                            PsiElement(is)('is')(1215,1217)
                            PsiWhiteSpace(' ')(1217,1218)
                            SIMPLE_TYPE_NAME(1218,1222)
                              REFERENCE_TYPE_NAME(1218,1222)
                                BUILT_IN_REFERENCE_TYPE_NAME(1218,1222)
                                  JSON_TYPE_NAME(1218,1222)
                                    PsiElement(json)('json')(1218,1222)
                          PsiElement())(')')(1222,1223)
                      PsiWhiteSpace(' ')(1223,1224)
                      PsiElement({)('{')(1224,1225)
                      PsiWhiteSpace('\n            ')(1225,1238)
                      BLOCK(1238,1633)
                        STATEMENT(1238,1457)
                          VARIABLE_DEFINITION_STATEMENT(1238,1457)
                            VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1238,1457)
                              SIMPLE_TYPE_NAME(1238,1244)
                                VALUE_TYPE_NAME(1238,1244)
                                  PsiElement(string)('string')(1238,1244)
                              PsiWhiteSpace(' ')(1244,1245)
                              BINDING_PATTERN(1245,1248)
                                PsiElement(identifier)('msg')(1245,1248)
                              PsiWhiteSpace(' ')(1248,1249)
                              PsiElement(=)('=')(1249,1250)
                              PsiWhiteSpace('\n                ')(1250,1267)
                              VARIABLE_REFERENCE_EXPRESSION(1267,1456)
                                FUNCTION_INVOCATION_REFERENCE(1267,1456)
                                  FUNCTION_INVOCATION(1267,1456)
                                    FUNCTION_NAME_REFERENCE(1267,1277)
                                      PACKAGE_REFERENCE(1267,1270)
                                        PsiElement(identifier)('io')(1267,1269)
                                        PsiElement(:)(':')(1269,1270)
                                      ANY_IDENTIFIER_NAME(1270,1277)
                                        PsiElement(identifier)('sprintf')(1270,1277)
                                    PsiElement(()('(')(1277,1278)
                                    INVOCATION_ARG_LIST(1278,1455)
                                      INVOCATION_ARG(1278,1364)
                                        SIMPLE_LITERAL_EXPRESSION(1278,1364)
                                          SIMPLE_LITERAL(1278,1364)
                                            PsiElement(QUOTED_STRING_LITERAL)('"Update stock quote request received.\n                            symbol:%s, price:%s"')(1278,1364)
                                      PsiElement(,)(',')(1364,1365)
                                      PsiWhiteSpace('\n                            ')(1365,1394)
                                      INVOCATION_ARG(1394,1410)
                                        VARIABLE_REFERENCE_EXPRESSION(1394,1410)
                                          FIELD_VARIABLE_REFERENCE(1394,1410)
                                            SIMPLE_VARIABLE_REFERENCE(1394,1403)
                                              NAME_REFERENCE(1394,1403)
                                                PsiElement(identifier)('updateReq')(1394,1403)
                                            FIELD(1403,1410)
                                              PsiElement(.)('.')(1403,1404)
                                              PsiElement(identifier)('symbol')(1404,1410)
                                      PsiElement(,)(',')(1410,1411)
                                      PsiWhiteSpace('\n                            ')(1411,1440)
                                      INVOCATION_ARG(1440,1455)
                                        VARIABLE_REFERENCE_EXPRESSION(1440,1455)
                                          FIELD_VARIABLE_REFERENCE(1440,1455)
                                            SIMPLE_VARIABLE_REFERENCE(1440,1449)
                                              NAME_REFERENCE(1440,1449)
                                                PsiElement(identifier)('updateReq')(1440,1449)
                                            FIELD(1449,1455)
                                              PsiElement(.)('.')(1449,1450)
                                              PsiElement(identifier)('price')(1450,1455)
                                    PsiElement())(')')(1455,1456)
                              PsiElement(;)(';')(1456,1457)
                        PsiWhiteSpace('\n            ')(1457,1470)
                        STATEMENT(1470,1489)
                          EXPRESSION_STMT(1470,1489)
                            VARIABLE_REFERENCE_EXPRESSION(1470,1488)
                              FUNCTION_INVOCATION_REFERENCE(1470,1488)
                                FUNCTION_INVOCATION(1470,1488)
                                  FUNCTION_NAME_REFERENCE(1470,1483)
                                    PACKAGE_REFERENCE(1470,1474)
                                      PsiElement(identifier)('log')(1470,1473)
                                      PsiElement(:)(':')(1473,1474)
                                    ANY_IDENTIFIER_NAME(1474,1483)
                                      PsiElement(identifier)('printInfo')(1474,1483)
                                  PsiElement(()('(')(1483,1484)
                                  INVOCATION_ARG_LIST(1484,1487)
                                    INVOCATION_ARG(1484,1487)
                                      VARIABLE_REFERENCE_EXPRESSION(1484,1487)
                                        SIMPLE_VARIABLE_REFERENCE(1484,1487)
                                          NAME_REFERENCE(1484,1487)
                                            PsiElement(identifier)('msg')(1484,1487)
                                  PsiElement())(')')(1487,1488)
                            PsiElement(;)(';')(1488,1489)
                        PsiWhiteSpace('\n\n            ')(1489,1503)
                        STATEMENT(1503,1550)
                          VARIABLE_DEFINITION_STATEMENT(1503,1550)
                            VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1503,1550)
                              SIMPLE_TYPE_NAME(1503,1507)
                                REFERENCE_TYPE_NAME(1503,1507)
                                  BUILT_IN_REFERENCE_TYPE_NAME(1503,1507)
                                    JSON_TYPE_NAME(1503,1507)
                                      PsiElement(json)('json')(1503,1507)
                              PsiWhiteSpace(' ')(1507,1508)
                              BINDING_PATTERN(1508,1515)
                                PsiElement(identifier)('jsonRes')(1508,1515)
                              PsiWhiteSpace(' ')(1515,1516)
                              PsiElement(=)('=')(1516,1517)
                              PsiWhiteSpace(' ')(1517,1518)
                              RECORD_LITERAL_EXPRESSION(1518,1549)
                                RECORD_LITERAL(1518,1549)
                                  PsiElement({)('{')(1518,1519)
                                  PsiWhiteSpace(' ')(1519,1520)
                                  RECORD_LITERAL_BODY(1520,1547)
                                    RECORD_KEY_VALUE(1520,1547)
                                      RECORD_KEY(1520,1529)
                                        SIMPLE_LITERAL_EXPRESSION(1520,1529)
                                          SIMPLE_LITERAL(1520,1529)
                                            PsiElement(QUOTED_STRING_LITERAL)('"message"')(1520,1529)
                                      PsiElement(:)(':')(1529,1530)
                                      PsiWhiteSpace(' ')(1530,1531)
                                      SIMPLE_LITERAL_EXPRESSION(1531,1547)
                                        SIMPLE_LITERAL(1531,1547)
                                          PsiElement(QUOTED_STRING_LITERAL)('"updating stock"')(1531,1547)
                                  PsiWhiteSpace(' ')(1547,1548)
                                  PsiElement(})('}')(1548,1549)
                              PsiElement(;)(';')(1549,1550)
                        PsiWhiteSpace('\n            ')(1550,1563)
                        STATEMENT(1563,1592)
                          ASSIGNMENT_STATEMENT(1563,1592)
                            FIELD_VARIABLE_REFERENCE(1563,1577)
                              SIMPLE_VARIABLE_REFERENCE(1563,1566)
                                NAME_REFERENCE(1563,1566)
                                  PsiElement(identifier)('res')(1563,1566)
                              FIELD(1566,1577)
                                PsiElement(.)('.')(1566,1567)
                                PsiElement(identifier)('statusCode')(1567,1577)
                            PsiWhiteSpace(' ')(1577,1578)
                            PsiElement(=)('=')(1578,1579)
                            PsiWhiteSpace(' ')(1579,1580)
                            VARIABLE_REFERENCE_EXPRESSION(1580,1591)
                              SIMPLE_VARIABLE_REFERENCE(1580,1591)
                                NAME_REFERENCE(1580,1591)
                                  PACKAGE_REFERENCE(1580,1585)
                                    PsiElement(identifier)('http')(1580,1584)
                                    PsiElement(:)(':')(1584,1585)
                                  PsiElement(identifier)('OK_200')(1585,1591)
                            PsiElement(;)(';')(1591,1592)
                        PsiWhiteSpace('\n            ')(1592,1605)
                        STATEMENT(1605,1633)
                          EXPRESSION_STMT(1605,1633)
                            VARIABLE_REFERENCE_EXPRESSION(1605,1632)
                              INVOCATION_REFERENCE(1605,1632)
                                SIMPLE_VARIABLE_REFERENCE(1605,1608)
                                  NAME_REFERENCE(1605,1608)
                                    PsiElement(identifier)('res')(1605,1608)
                                INVOCATION(1608,1632)
                                  PsiElement(.)('.')(1608,1609)
                                  ANY_IDENTIFIER_NAME(1609,1623)
                                    PsiElement(identifier)('setJsonPayload')(1609,1623)
                                  PsiElement(()('(')(1623,1624)
                                  INVOCATION_ARG_LIST(1624,1631)
                                    INVOCATION_ARG(1624,1631)
                                      VARIABLE_REFERENCE_EXPRESSION(1624,1631)
                                        SIMPLE_VARIABLE_REFERENCE(1624,1631)
                                          NAME_REFERENCE(1624,1631)
                                            PsiElement(identifier)('jsonRes')(1624,1631)
                                  PsiElement())(')')(1631,1632)
                            PsiElement(;)(';')(1632,1633)
                      PsiWhiteSpace('\n        ')(1633,1642)
                      PsiElement(})('}')(1642,1643)
                    PsiWhiteSpace(' ')(1643,1644)
                    ELSE_CLAUSE(1644,1841)
                      PsiElement(else)('else')(1644,1648)
                      PsiWhiteSpace(' ')(1648,1649)
                      PsiElement({)('{')(1649,1650)
                      PsiWhiteSpace('\n            ')(1650,1663)
                      BLOCK(1663,1831)
                        STATEMENT(1663,1711)
                          ASSIGNMENT_STATEMENT(1663,1711)
                            FIELD_VARIABLE_REFERENCE(1663,1677)
                              SIMPLE_VARIABLE_REFERENCE(1663,1666)
                                NAME_REFERENCE(1663,1666)
                                  PsiElement(identifier)('res')(1663,1666)
                              FIELD(1666,1677)
                                PsiElement(.)('.')(1666,1667)
                                PsiElement(identifier)('statusCode')(1667,1677)
                            PsiWhiteSpace(' ')(1677,1678)
                            PsiElement(=)('=')(1678,1679)
                            PsiWhiteSpace(' ')(1679,1680)
                            VARIABLE_REFERENCE_EXPRESSION(1680,1710)
                              SIMPLE_VARIABLE_REFERENCE(1680,1710)
                                NAME_REFERENCE(1680,1710)
                                  PACKAGE_REFERENCE(1680,1685)
                                    PsiElement(identifier)('http')(1680,1684)
                                    PsiElement(:)(':')(1684,1685)
                                  PsiElement(identifier)('INTERNAL_SERVER_ERROR_500')(1685,1710)
                            PsiElement(;)(';')(1710,1711)
                        PsiWhiteSpace('\n            ')(1711,1724)
                        STATEMENT(1724,1759)
                          EXPRESSION_STMT(1724,1759)
                            VARIABLE_REFERENCE_EXPRESSION(1724,1758)
                              INVOCATION_REFERENCE(1724,1758)
                                SIMPLE_VARIABLE_REFERENCE(1724,1727)
                                  NAME_REFERENCE(1724,1727)
                                    PsiElement(identifier)('res')(1724,1727)
                                INVOCATION(1727,1758)
                                  PsiElement(.)('.')(1727,1728)
                                  ANY_IDENTIFIER_NAME(1728,1738)
                                    PsiElement(identifier)('setPayload')(1728,1738)
                                  PsiElement(()('(')(1738,1739)
                                  INVOCATION_ARG_LIST(1739,1757)
                                    INVOCATION_ARG(1739,1757)
                                      VARIABLE_REFERENCE_EXPRESSION(1739,1757)
                                        INVOCATION_REFERENCE(1739,1757)
                                          SIMPLE_VARIABLE_REFERENCE(1739,1748)
                                            NAME_REFERENCE(1739,1748)
                                              PsiElement(identifier)('updateReq')(1739,1748)
                                          INVOCATION(1748,1757)
                                            PsiElement(.)('.')(1748,1749)
                                            ANY_IDENTIFIER_NAME(1749,1755)
                                              PsiElement(identifier)('reason')(1749,1755)
                                            PsiElement(()('(')(1755,1756)
                                            PsiElement())(')')(1756,1757)
                                  PsiElement())(')')(1757,1758)
                            PsiElement(;)(';')(1758,1759)
                        PsiWhiteSpace('\n            ')(1759,1772)
                        STATEMENT(1772,1831)
                          EXPRESSION_STMT(1772,1831)
                            VARIABLE_REFERENCE_EXPRESSION(1772,1830)
                              FUNCTION_INVOCATION_REFERENCE(1772,1830)
                                FUNCTION_INVOCATION(1772,1830)
                                  FUNCTION_NAME_REFERENCE(1772,1786)
                                    PACKAGE_REFERENCE(1772,1776)
                                      PsiElement(identifier)('log')(1772,1775)
                                      PsiElement(:)(':')(1775,1776)
                                    ANY_IDENTIFIER_NAME(1776,1786)
                                      PsiElement(identifier)('printError')(1776,1786)
                                  PsiElement(()('(')(1786,1787)
                                  INVOCATION_ARG_LIST(1787,1829)
                                    INVOCATION_ARG(1787,1812)
                                      SIMPLE_LITERAL_EXPRESSION(1787,1812)
                                        SIMPLE_LITERAL(1787,1812)
                                          PsiElement(QUOTED_STRING_LITERAL)('"Payload error occurred!"')(1787,1812)
                                    PsiElement(,)(',')(1812,1813)
                                    PsiWhiteSpace(' ')(1813,1814)
                                    INVOCATION_ARG(1814,1829)
                                      NAMED_ARGS(1814,1829)
                                        PsiElement(identifier)('err')(1814,1817)
                                        PsiWhiteSpace(' ')(1817,1818)
                                        PsiElement(=)('=')(1818,1819)
                                        PsiWhiteSpace(' ')(1819,1820)
                                        VARIABLE_REFERENCE_EXPRESSION(1820,1829)
                                          SIMPLE_VARIABLE_REFERENCE(1820,1829)
                                            NAME_REFERENCE(1820,1829)
                                              PsiElement(identifier)('updateReq')(1820,1829)
                                  PsiElement())(')')(1829,1830)
                            PsiElement(;)(';')(1830,1831)
                      PsiWhiteSpace('\n        ')(1831,1840)
                      PsiElement(})('}')(1840,1841)
                PsiWhiteSpace('\n\n        ')(1841,1851)
                STATEMENT(1851,1883)
                  VARIABLE_DEFINITION_STATEMENT(1851,1883)
                    VARIABLE_DEFINITION_STATEMENT_WITH_ASSIGNMENT(1851,1883)
                      PsiElement(var)('var')(1851,1854)
                      PsiWhiteSpace(' ')(1854,1855)
                      BINDING_PATTERN(1855,1861)
                        PsiElement(identifier)('result')(1855,1861)
                      PsiWhiteSpace(' ')(1861,1862)
                      PsiElement(=)('=')(1862,1863)
                      PsiWhiteSpace(' ')(1863,1864)
                      ACTION_INVOCATION_EXPRESSION(1864,1882)
                        ACTION_INVOCATION(1864,1882)
                          SIMPLE_VARIABLE_REFERENCE(1864,1868)
                            NAME_REFERENCE(1864,1868)
                              PsiElement(identifier)('conn')(1864,1868)
                          PsiElement(->)('->')(1868,1870)
                          FUNCTION_INVOCATION(1870,1882)
                            FUNCTION_NAME_REFERENCE(1870,1877)
                              ANY_IDENTIFIER_NAME(1870,1877)
                                PsiElement(identifier)('respond')(1870,1877)
                            PsiElement(()('(')(1877,1878)
                            INVOCATION_ARG_LIST(1878,1881)
                              INVOCATION_ARG(1878,1881)
                                VARIABLE_REFERENCE_EXPRESSION(1878,1881)
                                  SIMPLE_VARIABLE_REFERENCE(1878,1881)
                                    NAME_REFERENCE(1878,1881)
                                      PsiElement(identifier)('res')(1878,1881)
                            PsiElement())(')')(1881,1882)
                      PsiElement(;)(';')(1882,1883)
                PsiWhiteSpace('\n        ')(1883,1892)
                STATEMENT(1892,2123)
                  IF_ELSE_STATEMENT(1892,2123)
                    IF_CLAUSE(1892,2044)
                      PsiElement(if)('if')(1892,1894)
                      PsiWhiteSpace(' ')(1894,1895)
                      BRACED_OR_TUPLE_EXPRESSION(1895,1912)
                        TUPLE_LITERAL(1895,1912)
                          PsiElement(()('(')(1895,1896)
                          TYPE_TEST_EXPRESSION(1896,1911)
                            VARIABLE_REFERENCE_EXPRESSION(1896,1902)
                              SIMPLE_VARIABLE_REFERENCE(1896,1902)
                                NAME_REFERENCE(1896,1902)
                                  PsiElement(identifier)('result')(1896,1902)
                            PsiWhiteSpace(' ')(1902,1903)
                            PsiElement(is)('is')(1903,1905)
                            PsiWhiteSpace(' ')(1905,1906)
                            SIMPLE_TYPE_NAME(1906,1911)
                              REFERENCE_TYPE_NAME(1906,1911)
                                BUILT_IN_REFERENCE_TYPE_NAME(1906,1911)
                                  ERROR_TYPE_NAME(1906,1911)
                                    PsiElement(error)('error')(1906,1911)
                          PsiElement())(')')(1911,1912)
                      PsiWhiteSpace(' ')(1912,1913)
                      PsiElement({)('{')(1913,1914)
                      PsiWhiteSpace('\n            ')(1914,1927)
                      BLOCK(1927,2034)
                        STATEMENT(1927,2034)
                          EXPRESSION_STMT(1927,2034)
                            VARIABLE_REFERENCE_EXPRESSION(1927,2033)
                              FUNCTION_INVOCATION_REFERENCE(1927,2033)
                                FUNCTION_INVOCATION(1927,2033)
                                  FUNCTION_NAME_REFERENCE(1927,1941)
                                    PACKAGE_REFERENCE(1927,1931)
                                      PsiElement(identifier)('log')(1927,1930)
                                      PsiElement(:)(':')(1930,1931)
                                    ANY_IDENTIFIER_NAME(1931,1941)
                                      PsiElement(identifier)('printError')(1931,1941)
                                  PsiElement(()('(')(1941,1942)
                                  INVOCATION_ARG_LIST(1942,2032)
                                    INVOCATION_ARG(1942,1985)
                                      SIMPLE_LITERAL_EXPRESSION(1942,1985)
                                        SIMPLE_LITERAL(1942,1985)
                                          PsiElement(QUOTED_STRING_LITERAL)('"Could not send response back to initiator"')(1942,1985)
                                    PsiElement(,)(',')(1985,1986)
                                    PsiWhiteSpace('\n                                 ')(1986,2020)
                                    INVOCATION_ARG(2020,2032)
                                      NAMED_ARGS(2020,2032)
                                        PsiElement(identifier)('err')(2020,2023)
                                        PsiWhiteSpace(' ')(2023,2024)
                                        PsiElement(=)('=')(2024,2025)
                                        PsiWhiteSpace(' ')(2025,2026)
                                        VARIABLE_REFERENCE_EXPRESSION(2026,2032)
                                          SIMPLE_VARIABLE_REFERENCE(2026,2032)
                                            NAME_REFERENCE(2026,2032)
                                              PsiElement(identifier)('result')(2026,2032)
                                  PsiElement())(')')(2032,2033)
                            PsiElement(;)(';')(2033,2034)
                      PsiWhiteSpace('\n        ')(2034,2043)
                      PsiElement(})('}')(2043,2044)
                    PsiWhiteSpace(' ')(2044,2045)
                    ELSE_CLAUSE(2045,2123)
                      PsiElement(else)('else')(2045,2049)
                      PsiWhiteSpace(' ')(2049,2050)
                      PsiElement({)('{')(2050,2051)
                      PsiWhiteSpace('\n            ')(2051,2064)
                      BLOCK(2064,2113)
                        STATEMENT(2064,2113)
                          EXPRESSION_STMT(2064,2113)
                            VARIABLE_REFERENCE_EXPRESSION(2064,2112)
                              FUNCTION_INVOCATION_REFERENCE(2064,2112)
                                FUNCTION_INVOCATION(2064,2112)
                                  FUNCTION_NAME_REFERENCE(2064,2077)
                                    PACKAGE_REFERENCE(2064,2068)
                                      PsiElement(identifier)('log')(2064,2067)
                                      PsiElement(:)(':')(2067,2068)
                                    ANY_IDENTIFIER_NAME(2068,2077)
                                      PsiElement(identifier)('printInfo')(2068,2077)
                                  PsiElement(()('(')(2077,2078)
                                  INVOCATION_ARG_LIST(2078,2111)
                                    INVOCATION_ARG(2078,2111)
                                      SIMPLE_LITERAL_EXPRESSION(2078,2111)
                                        SIMPLE_LITERAL(2078,2111)
                                          PsiElement(QUOTED_STRING_LITERAL)('"Sent response back to initiator"')(2078,2111)
                                  PsiElement())(')')(2111,2112)
                            PsiElement(;)(';')(2112,2113)
                      PsiWhiteSpace('\n        ')(2113,2122)
                      PsiElement(})('}')(2122,2123)
                PsiWhiteSpace('\n    ')(2123,2128)
                PsiElement(})('}')(2128,2129)
          PsiWhiteSpace('\n')(2129,2130)
          PsiElement(})('}')(2130,2131)
  PsiWhiteSpace('\n\n')(2131,2133)
  PsiComment(LINE_COMMENT)('// The participant function that will get called when the distributed')(2133,2202)
  PsiWhiteSpace('\n')(2202,2203)
  PsiComment(LINE_COMMENT)('// transaction is aborted')(2203,2228)
  PsiWhiteSpace('\n')(2228,2229)
  DEFINITION(2229,2363)
    FUNCTION_DEFINITION(2229,2363)
      PsiElement(function)('function')(2229,2237)
      PsiWhiteSpace(' ')(2237,2238)
      CALLABLE_UNIT_SIGNATURE(2238,2281)
        ANY_IDENTIFIER_NAME(2238,2259)
          PsiElement(identifier)('printParticipantAbort')(2238,2259)
        PsiElement(()('(')(2259,2260)
        FORMAL_PARAMETER_LIST(2260,2280)
          PARAMETER(2260,2280)
            PARAMETER_WITH_TYPE(2260,2280)
              SIMPLE_TYPE_NAME(2260,2266)
                VALUE_TYPE_NAME(2260,2266)
                  PsiElement(string)('string')(2260,2266)
              PsiWhiteSpace(' ')(2266,2267)
              PsiElement(identifier)('transactionId')(2267,2280)
        PsiElement())(')')(2280,2281)
      PsiWhiteSpace(' ')(2281,2282)
      CALLABLE_UNIT_BODY(2282,2363)
        PsiElement({)('{')(2282,2283)
        PsiWhiteSpace('\n    ')(2283,2288)
        STATEMENT(2288,2361)
          EXPRESSION_STMT(2288,2361)
            VARIABLE_REFERENCE_EXPRESSION(2288,2360)
              FUNCTION_INVOCATION_REFERENCE(2288,2360)
                FUNCTION_INVOCATION(2288,2360)
                  FUNCTION_NAME_REFERENCE(2288,2301)
                    PACKAGE_REFERENCE(2288,2292)
                      PsiElement(identifier)('log')(2288,2291)
                      PsiElement(:)(':')(2291,2292)
                    ANY_IDENTIFIER_NAME(2292,2301)
                      PsiElement(identifier)('printInfo')(2292,2301)
                  PsiElement(()('(')(2301,2302)
                  INVOCATION_ARG_LIST(2302,2359)
                    INVOCATION_ARG(2302,2359)
                      BINARY_ADD_SUB_EXPRESSION(2302,2359)
                        BINARY_ADD_SUB_EXPRESSION(2302,2346)
                          SIMPLE_LITERAL_EXPRESSION(2302,2330)
                            SIMPLE_LITERAL(2302,2330)
                              PsiElement(QUOTED_STRING_LITERAL)('"Participated transaction: "')(2302,2330)
                          PsiWhiteSpace(' ')(2330,2331)
                          PsiElement(+)('+')(2331,2332)
                          PsiWhiteSpace(' ')(2332,2333)
                          VARIABLE_REFERENCE_EXPRESSION(2333,2346)
                            SIMPLE_VARIABLE_REFERENCE(2333,2346)
                              NAME_REFERENCE(2333,2346)
                                PsiElement(identifier)('transactionId')(2333,2346)
                        PsiWhiteSpace(' ')(2346,2347)
                        PsiElement(+)('+')(2347,2348)
                        PsiWhiteSpace(' ')(2348,2349)
                        SIMPLE_LITERAL_EXPRESSION(2349,2359)
                          SIMPLE_LITERAL(2349,2359)
                            PsiElement(QUOTED_STRING_LITERAL)('" aborted"')(2349,2359)
                  PsiElement())(')')(2359,2360)
            PsiElement(;)(';')(2360,2361)
        PsiWhiteSpace('\n')(2361,2362)
        PsiElement(})('}')(2362,2363)
  PsiWhiteSpace('\n\n')(2363,2365)
  PsiComment(LINE_COMMENT)('// The participant function that will get called when the distributed')(2365,2434)
  PsiWhiteSpace('\n')(2434,2435)
  PsiComment(LINE_COMMENT)('// transaction is committed')(2435,2462)
  PsiWhiteSpace('\n')(2462,2463)
  DEFINITION(2463,2600)
    FUNCTION_DEFINITION(2463,2600)
      PsiElement(function)('function')(2463,2471)
      PsiWhiteSpace(' ')(2471,2472)
      CALLABLE_UNIT_SIGNATURE(2472,2516)
        ANY_IDENTIFIER_NAME(2472,2494)
          PsiElement(identifier)('printParticipantCommit')(2472,2494)
        PsiElement(()('(')(2494,2495)
        FORMAL_PARAMETER_LIST(2495,2515)
          PARAMETER(2495,2515)
            PARAMETER_WITH_TYPE(2495,2515)
              SIMPLE_TYPE_NAME(2495,2501)
                VALUE_TYPE_NAME(2495,2501)
                  PsiElement(string)('string')(2495,2501)
              PsiWhiteSpace(' ')(2501,2502)
              PsiElement(identifier)('transactionId')(2502,2515)
        PsiElement())(')')(2515,2516)
      PsiWhiteSpace(' ')(2516,2517)
      CALLABLE_UNIT_BODY(2517,2600)
        PsiElement({)('{')(2517,2518)
        PsiWhiteSpace('\n    ')(2518,2523)
        STATEMENT(2523,2598)
          EXPRESSION_STMT(2523,2598)
            VARIABLE_REFERENCE_EXPRESSION(2523,2597)
              FUNCTION_INVOCATION_REFERENCE(2523,2597)
                FUNCTION_INVOCATION(2523,2597)
                  FUNCTION_NAME_REFERENCE(2523,2536)
                    PACKAGE_REFERENCE(2523,2527)
                      PsiElement(identifier)('log')(2523,2526)
                      PsiElement(:)(':')(2526,2527)
                    ANY_IDENTIFIER_NAME(2527,2536)
                      PsiElement(identifier)('printInfo')(2527,2536)
                  PsiElement(()('(')(2536,2537)
                  INVOCATION_ARG_LIST(2537,2596)
                    INVOCATION_ARG(2537,2596)
                      BINARY_ADD_SUB_EXPRESSION(2537,2596)
                        BINARY_ADD_SUB_EXPRESSION(2537,2581)
                          SIMPLE_LITERAL_EXPRESSION(2537,2565)
                            SIMPLE_LITERAL(2537,2565)
                              PsiElement(QUOTED_STRING_LITERAL)('"Participated transaction: "')(2537,2565)
                          PsiWhiteSpace(' ')(2565,2566)
                          PsiElement(+)('+')(2566,2567)
                          PsiWhiteSpace(' ')(2567,2568)
                          VARIABLE_REFERENCE_EXPRESSION(2568,2581)
                            SIMPLE_VARIABLE_REFERENCE(2568,2581)
                              NAME_REFERENCE(2568,2581)
                                PsiElement(identifier)('transactionId')(2568,2581)
                        PsiWhiteSpace(' ')(2581,2582)
                        PsiElement(+)('+')(2582,2583)
                        PsiWhiteSpace(' ')(2583,2584)
                        SIMPLE_LITERAL_EXPRESSION(2584,2596)
                          SIMPLE_LITERAL(2584,2596)
                            PsiElement(QUOTED_STRING_LITERAL)('" committed"')(2584,2596)
                  PsiElement())(')')(2596,2597)
            PsiElement(;)(';')(2597,2598)
        PsiWhiteSpace('\n')(2598,2599)
        PsiElement(})('}')(2599,2600)
